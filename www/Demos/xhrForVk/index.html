<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <script defer src="//vk.com/js/api/openapi.js" type="text/javascript"></script>
    <script type="application/javascript">
        "use strict";
        // Запуск исполнения сценария JS при готовности DOM
        document.addEventListener("DOMContentLoaded", function() {
            
            // Инициализация API ВКонтакте
            VK.init({
                apiId: 5218692,
            });
            
            // Получение сессионых данных пользователя, если он авторизован в ВКонтакте
            VK.Auth.getLoginStatus(function(response){
                /**
                 * Объявление переменных
                 *
                 * * warning (тип: object) - HTML-Элемент для уведомления посетителя
                 * * message (тип: string) - Текст уведомления для посетителя
                 */
                var authStatus = null,
                    warning = document.createElement("p"),
                    message = 'Мы не знаем кто вы. Представьтесь, пожалуйста!';

                // Актуализируем переменную статуса авторизации посетителя
                authStatus = (response.session) ? true: false;

                // Если посетитель не идентифицирован
                if(authStatus){
                    // Переопледеление текста уведомления(приветствия)
                    message = 'Вы успешно идентифицированы!';
                }

                // Вставка HTML-содержимого в элемент "p"
                warning.innerHTML = '<strong>Здравствуйте!<br>'+message+'</strong>';
                // Вставка элеента "p" в конец элемента ".window-wrapper"
                document.querySelector('.window-wrapper').appendChild(warning);
                
                console.log( authStatus );
            });
            
            function xhrRequest(){
                // Создание экземпляра объекта XMLHttpRequest
                var xhr = new XMLHttpRequest();

                // Конфигурируем его: GET-запрос на URL 'phones.json'
                xhr.open('GET', 'phones.json', false);

                // 3. Отсылаем запрос
                xhr.send();

                // 4. Если код ответа сервера не 200, то это ошибка
                if (xhr.status != 200) {
                  // обработать ошибку
                  alert( xhr.status + ': ' + xhr.statusText ); // пример вывода: 404: Not Found
                } else {
                  // вывести результат
                  alert( xhr.responseText ); // responseText -- текст ответа.
                }
            };

        });
    </script>
</head>
<body>
    <h1>Формирвоание контента средствами XMLHttpRequest в зависимости от статуса авторизации посетителя в ВКонтакте</h1>
    <div class="window-wrapper"></div>
</body>
</html>