<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css">
        <!---->
        <script defer src="//vk.com/js/api/openapi.js" type="text/javascript"></script>
        <script defer src="/libraries/JavaScript/Ajax/ajax.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            "use strict";
            // Исполнение скрипта после полной загрузки страницы
            window.onload = function(){

                // Инициализация API ВКонтакте
                VK.init({
                    apiId: 5218692,
                });

                // Получение сессионых данных пользователя, если он авторизован в ВКонтакте
                VK.Auth.getLoginStatus(function(response){
                    /**
                     * Объявление переменных
                     *
                     * * authStatus (тип: boolean) - Статус авторизации пользователя в сети ВКонтакте
                     * * warning (тип: object) - HTML-Элемент для уведомления посетителя
                     * * message (тип: string) - Текст уведомления для посетителя
                     */
                    var authStatus = null,
                        warning = document.createElement("p"),
                        message = 'Мы не знаем кто вы. Представьтесь, пожалуйста!';

                    // переопределение переменной статуса авторизации посетителя
                    authStatus = (response.session) ? true: false;

                    // Если посетитель не идентифицирован
                    if(authStatus){
                        // Переопледеление текста уведомления(приветствия)
                        message = 'Вы успешно идентифицированы!';
                    }

                    // Вставка HTML-содержимого в элемент "p"
                    warning.innerHTML = '<strong>Здравствуйте!<br>'+message+'</strong>';
                    // Вставка элеента "p" в конец элемента ".window-wrapper"
                    document.querySelector('.window-wrapper').appendChild(warning);

                    // Создание экземпляра объекта "ajax"
                    var xhr = new ajax({
                        url:"helpers/formValidator.php",
                        method:"post",
                        data:{
                            name:"Ildar Ibragimov"
                        },
                        error: function(result){
                            console.log(result);
                            document.querySelector(".window-wrapper").innerHTML = result;
                        },
                        success: function(result){
                            console.log(result);
                            document.querySelector(".window-wrapper").innerHTML = result;
                        }                    
                    });

                    //console.log( response.session );
                    //console.log( getUriParams(response.session) );
                    //console.log( JSON.stringify(response.session) );
                });

            };
        </script>
    </head>
    <body>
        <h1>Формирвоание контента средствами XMLHttpRequest в зависимости от статуса авторизации посетителя в ВКонтакте</h1>
        <div class="window-wrapper"></div>
     </body>
</html>