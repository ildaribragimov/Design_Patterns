"use strict";
/**
 * Класс "Аккордеон"
 * @author Ildar Ibragimov <iibragimov84@gmail.com>
 * @copyright Ildar Ibragimov 2016
 */
function accordion(f){function g(a){for(var b=0;b<a.length;b++)c(a[b])}function c(a){var b=getComputedStyle(a);parent(a,".accordion__section-content").dataset.blockHeight=a.offsetHeight+parseFloat(b.marginTop)+parseFloat(b.marginBottom)}var h=this;this.toggle=function(a,b){var d=parent(a,".accordion__section");if(d){b=b||null;var k=d.classList.contains("accordion__section_open")?!1:!0,e=d.querySelector(".accordion__section-content"),c="0px"!=getComputedStyle(e).height?"":e.dataset.blockHeight+"px";getComputedStyle(e).height!=c&&(e.style.height=c);d.classList.toggle("accordion__section_open",k);b&&b()}};(function(a){var b=a.getElementsByClassName("accordion__section-content-wrapper");g(b);a.addEventListener("click",function(b){var a=b.target;b.preventDefault();(a.classList.contains("link")||parent(a,".link"))&&h.toggle(a)});a.addEventListener("transitionend",function(a){var b=a.target;"height"==a.propertyName&&parent(b,".accordion__section_open")&&(c(b.querySelector(".accordion__section-content-wrapper")),a=b.dataset.blockHeight+"px",getComputedStyle(b).height!=a&&(b.style.height=a))})})(f)};